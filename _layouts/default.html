<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ page.title | escape }}</title>
  <meta name="description" content="{{ page.excerpt | strip_html | strip_newlines | escape }}">
  <link rel="stylesheet" href="{{ '/assets/style.css' | relative_url }}">
</head>
<body>
  <div id="container" class="layout">
    <!-- 왼쪽: 연/월/글 목록 -->
    <aside class="left-rail" aria-label="글 목록">
      <h1 class="site-title">블로그 / 이영</h1>

      {% assign posts_by_year = site.posts
         | group_by_exp: "p", "p.date | date: '%Y'"
         | sort: "name" | reverse %}

      {% for year in posts_by_year %}
        <details class="year" {% if forloop.first %}open{% endif %}>
          <summary>{{ year.name }}</summary>
          <ul class="year-list">
            {% assign items = year.items | sort: "date" | reverse %}
            {% for p in items %}
              <li>
                <a class="post-link"
                  href="{{ p.url | relative_url }}"
                  data-path="{{ p.url | relative_url }}"
                  title="{{ p.title }}"
                  data-full="{{ p.date | date: '%m-%d' }} – {{ p.title }}">
                  <span class="date">{{ p.date | date: "%m-%d" }}</span>
                  <span class="sep"> – </span>
                  <span class="title">{{ p.title }}</span>
                </a>

              </li>
            {% endfor %}
          </ul>
        </details>
      {% endfor %}
    </aside>

    <!-- 가운데: 본문 -->
    <main id="content" role="main">
      {{ content }}
    </main>

    <!-- 오른쪽: 태그 -->
    <aside id="tags" aria-label="태그">
  <h2># Tags</h2>
  <nav class="tag-list">

    {%- assign extern = site.data.externals | sort: 'order' -%}
    {%- assign extern_names = extern | map: 'name' -%}

    {#-- ① 외부 링크(가짜 태그) --#}
    {%- for e in extern -%}
      <a class="tag tag-extern"
         href="{{ e.url }}"
         {% unless e.newtab == false %}target="_blank" rel="noopener"{% endunless %}>
        #{{ e.label | default: e.name }}
      </a>
    {%- endfor -%}

    {#-- ② 실제 태그(외부에서 지정한 name은 제외) --#}
    {%- assign sorted_tags = site.tags | sort -%}
    {%- for t in sorted_tags -%}
      {%- assign name = t[0] -%}
      {%- unless extern_names contains name -%}
        <a class="tag" href="{{ '/tag/' | append: name | append: '/' | relative_url }}">#{{ name }}</a>
      {%- endunless -%}
    {%- endfor -%}

  </nav>
</aside>


  </div>

  <script defer src="{{ '/assets/app.js' | relative_url }}"></script>
</body>
</html>
